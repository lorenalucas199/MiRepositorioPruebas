<!DOCTYPE html>
<html lang="es-ES">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Recta tangente</title>
<link rel="stylesheet" href="miestilo.css">
    
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        processEscapes: true
      }
    });
    MathJax.Hub.Config({
      TeX: {
        Macros: {
          R: "{\\mathbb R}",
          N: "{\\mathbb N}",
          Z: "{\\mathbb Z}",
          bold: ["{\\bf #1}",1]
        }
      }
    });
    MathJax.Hub.Config({
      TeX: { equationNumbers: { autoNumber: "AMS" } }
    });
    TeX: {
      extensions: ["AMSmath.js", "AMSsymbols.js", "color.js"]
    }
</script>
    
<script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-AMS_HTML' async></script>
<script src='https://algebra.js.org/javascripts/algebra-0.2.6.min.js' ></script> 
    
<body style="font-family:'Rubik', sans-serif; font-size:18; background:linear-gradient(to bottom, #FF7F50, #FFDAB9); height:100vh; text-align:center;">
    <h1>Recta tangente</h1>
    <h3>de Lorena Lucas Baños</h3>
    Define dos rectas a partir de tus clicks en el siguiente espacio. A continuación, se mostrará el punto de intersección entre ambas:
    <br>
    <canvas id="canvas" width="600" height="400" class="recuadro"  onclick="coordenadas(event)"></canvas>
    
    <script> //Vamos a definir lo que se realiza en el interior del canvas:
        var c=document.getElementById("myCanvas1");
        var ctx=c.getContext("2d");

        //Definir la función para obtener las coordenadas de cada click dentro del canvas:
        let puntos=[]; //definir la variable puntos para almacenarlos
        function obtenerCoordenadas(event) {
            let coordCanvas=c.getBoundingClientRect(); //posición del canvas en la pantalla          
            let x=event.clientX-coordCanvas.x; //coordenada X en el canvas
            let y=event.clientY-coordCanvas.y; //coordenada Y en el canvas
            puntos.push({x,y})
            var punto={x, y};
            
            dibujarPunto(x,y); //dibuja ese punto

            if (puntos.length == 2) { //cuando haya 2 puntos dibujar las una rectas
                recta(puntos[0], puntos[1]);
            }
            if(puntos.length == 4) { //cuando haya 4 puntos dibujar la otra recta, la interseccion
                dibujarRecta(puntos[2], puntos[3]);
                let intersec = Interseccion(puntos[0], puntos[1], puntos[2], puntos[3]);
                if (intersec) {
                    dibujarInterseccion(intersec);
                } else {
                    ctx.beginPath();
                    ctx.font = "15px Rubik";
                    ctx.fillText("Las rectas son paralelas.", 10, 50);
                }

                points = [];
            }
        }

        function dibujarPunto(x, y) {
            ctx.beginPath();
            ctx.arc(x, y, 4, 0, 2 * Math.PI);
            ctx.fill();
        }

        function dibujarRecta(p1, p2) {
            ctx.beginPath();
            ctx.moveTo(p1.x, p1.y);
            ctx.lineTo(p2.x, p2.y);
            ctx.stroke();
        }

        function dibujarInterseccion(p) {
            ctx.fillStyle = 'red';
            ctx.beginPath();
            ctx.arc(p.x, p.y, 6, 0, 2 * Math.PI);
            ctx.fill();
            ctx.fillStyle = 'black'; //se vuelve a cambiar a negro para que el resto se siga dibujando negro
        }

        funcion ecuacionRecta(p1,p2){
            let m=(p2.y - p1.y) / (p2.x - p1.x);
            let b = p1.y - m * p1.x;
            return { m, b }; // devuelve y = mx + b
        }

        function Interseccion(p1, p2, p3, p4) {
            let r1=ecuacionRecta(p1,p2);
            let r2=ecuacionRecta(p3,p4);

            / y = m1*x + b1
            // y = m2*x + b2
            // => m1*x + b1 = m2*x + b2

            //var expr1=algebra.parse("r1.m*x-r1.b); //algebra.parse coge la ecuacion literal sin evaluar r1.m y r1.b
            //var expr2=algebra.parse("r2.m*x-r2.b);  
            var expr1 = new algebra.Expression(r1.m).multiply(x).add(r1.b);
            var expr2 = new algebra.Expression(r2.m).multiply(x).add(r2.b);
            var eq1=new Equation(expr1,expr2); // Definimos la ecuación expr1 = expr2.
            
            var valorx = eq1.solveFor("x"); // Resolvemos la ecuacion.
            var valory=r1.m * valorx + r1.b;
            intersec={xvalor,yvalor};
      
    }
    </script>
</body>
</html>
