<!DOCTYPE html>
<html lang="es-ES">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Matemáticas Dinámicas</title>
<link rel="stylesheet" href="miestilo.css">
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        processEscapes: true
      }
    });
    MathJax.Hub.Config({
      TeX: {
        Macros: {
          R: "{\\mathbb R}",
          N: "{\\mathbb N}",
          Z: "{\\mathbb Z}",
          bold: ["{\\bf #1}",1]
        }
      }
    });
    MathJax.Hub.Config({
      TeX: { equationNumbers: { autoNumber: "AMS" } }
    });
    TeX: {
      extensions: ["AMSmath.js", "AMSsymbols.js", "color.js"]
    }
</script>
    
<script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-AMS_HTML' async></script>
<script src='https://algebra.js.org/javascripts/algebra-0.2.6.min.js' ></script>    
    
<body style="font-family:'Rubik', sans-serif; font-size:18; background:linear-gradient(to bottom, #FF7F50, #FFDAB9); height:100vh; text-align:center;">
    <h1>Intersección de dos rectas</h1>
    <h3>de Lorena Lucas Baños</h3>
    Define dos rectas a partir de tus clicks en el siguiente espacio. A continuación, se mostrará el punto de intersección entre ambas:
    <br>
    <canvas id="canvas" width="600" height="400" class="recuadro"  onclick="coordenadas(event)"></canvas>

  <script>
    const canvas = document.getElementById("canvas");
    const ctx = canvas.getContext("2d");
    const areaDiv = document.getElementById("areas");

    let A = {x: 150, y: 400};
    let B = {x: 500, y: 400};
    let C = {x: 500, y: 150};
    let dragPoint = null;

    function distance(p1, p2) {
      const dx = p2.x - p1.x;
      const dy = p2.y - p1.y;
      return Math.sqrt(dx * dx + dy * dy);
    }

    function drawSquare(p1, p2, color) {
      const dx = p2.x - p1.x;
      const dy = p2.y - p1.y;
      const len = Math.sqrt(dx * dx + dy * dy);

      // Unit vector along the side
      const ux = dx / len;
      const uy = dy / len;

      // Perpendicular unit vector
      const px = -uy;
      const py = ux;

      const p3 = {
        x: p2.x + px * len,
        y: p2.y + py * len
      };
      const p4 = {
        x: p1.x + px * len,
        y: p1.y + py * len
      };

      ctx.beginPath();
      ctx.moveTo(p1.x, p1.y);
      ctx.lineTo(p2.x, p2.y);
      ctx.lineTo(p3.x, p3.y);
      ctx.lineTo(p4.x, p4.y);
      ctx.closePath();
      ctx.fillStyle = color;
      ctx.fill();
      ctx.stroke();

      return len * len; // Área del cuadrado
    }

    function draw() {
      // C ajustado para que el ángulo sea recto (en B)
      C.x = B.x;
      C.y = A.y;

      ctx.clearRect(0, 0, canvas.width, canvas.height);

      // Dibujar triángulo
      ctx.beginPath();
      ctx.moveTo(A.x, A.y);
      ctx.lineTo(B.x, B.y);
      ctx.lineTo(C.x, C.y);
      ctx.closePath();
      ctx.fillStyle = "#e0f7fa";
      ctx.fill();
      ctx.stroke();

      // Dibujar cuadrados y calcular áreas
      const area1 = drawSquare(A, B, "#ffccbc"); // cateto AB
      const area2 = drawSquare(B, C, "#c8e6c9"); // cateto BC
      const area3 = drawSquare(A, C, "#b3e5fc"); // hipotenusa AC

      // Dibujar puntos
      [A, B].forEach(p => {
        ctx.beginPath();
        ctx.arc(p.x, p.y, 6, 0, 2 * Math.PI);
        ctx.fillStyle = "red";
        ctx.fill();
      });

      // Mostrar áreas
      areaDiv.innerHTML = `
        <strong>Área cuadrado AB:</strong> ${area1.toFixed(2)}<br>
        <strong>Área cuadrado BC:</strong> ${area2.toFixed(2)}<br>
        <strong>Área cuadrado AC:</strong> ${area3.toFixed(2)}<br>
        <strong>¿Cumple a² + b² = c²?</strong> ${
          Math.abs((area1 + area2) - area3) < 1 ? '✅ Sí' : '❌ No'
        }
      `;
    }

    canvas.addEventListener("mousedown", (e) => {
      const rect = canvas.getBoundingClientRect();
      const x = e.clientX - rect.left;
      const y = e.clientY - rect.top;
      if (Math.hypot(x - A.x, y - A.y) < 10) dragPoint = A;
      else if (Math.hypot(x - B.x, y - B.y) < 10) dragPoint = B;
    });

    canvas.addEventListener("mousemove", (e) => {
      if (dragPoint) {
        const rect = canvas.getBoundingClientRect();
        dragPoint.x = e.clientX - rect.left;
        dragPoint.y = e.clientY - rect.top;
        draw();
      }
    });

    canvas.addEventListener("mouseup", () => {
      dragPoint = null;
    });

    draw();
  </script>
</body>
</html>
